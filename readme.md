# ğŸ§± plaxisproxy-excavation

*A Pythonic automation framework for Plaxis 3D excavation modeling and simulation*
ï¼ˆä¸€ä¸ªé¢å‘ Plaxis 3D çš„åŸºå‘å·¥ç¨‹å»ºæ¨¡ä¸ä»¿çœŸè‡ªåŠ¨åŒ–æ¡†æ¶ï¼‰

[Readme - English Version](readme_en.md)

---

## ğŸŒ é¡¹ç›®ç®€ä»‹ | Project Introduction

**plaxisproxy-excavation** æ˜¯ä¸€ä¸ªé¢å‘ **Plaxis 3D** çš„è‡ªåŠ¨åŒ–ä»¿çœŸä¸å»ºæ¨¡å°è£…æ¡†æ¶ï¼ŒåŸºäº Python 3.9.x å¼€å‘ï¼Œé€‚ç”¨äº **æ•™å­¦ã€ç§‘ç ”ä¸å®é™…å·¥ç¨‹æ¨¡æ‹Ÿ**ã€‚

è¯¥é¡¹ç›®é€šè¿‡å¯¹ Plaxis çš„åŸç”Ÿè„šæœ¬æ¥å£ï¼ˆ`plxscripting`ï¼‰è¿›è¡Œ **é¢å‘å¯¹è±¡ (OOP)** çš„å†å°è£…ï¼Œæ„å»ºäº†ä¸€ä¸ªæ¸…æ™°ã€ç»Ÿä¸€ã€å¯æ‰©å±•çš„ API å±‚ï¼Œå®ç°äº†ä»¥ä¸‹è‡ªåŠ¨åŒ–æµç¨‹ï¼š

* ğŸ§© **è‡ªåŠ¨åŒ–å»ºæ¨¡**ï¼šè‡ªåŠ¨ç”ŸæˆåœŸå±‚ã€æ”¯æŠ¤ã€é™æ°´ã€å¼€æŒ–é˜¶æ®µç­‰ï¼›
* âš™ï¸ **è‡ªåŠ¨åŒ–è®¡ç®—**ï¼šè‡ªåŠ¨æ‰§è¡Œ Plaxis æ±‚è§£æµç¨‹ï¼›
* ğŸ“Š **ç»“æœæå–ä¸å¯¼å‡º**ï¼šä» Plaxis Output ä¸­æå–å…³é”®ç»“æœï¼ˆå¦‚ä½ç§»ã€å†…åŠ›ã€åº”åŠ›ï¼‰ï¼›
* ğŸš€ **å¯æ‰©å±•æ¡†æ¶**ï¼šä¾¿äºæ·»åŠ æ–°çš„ææ–™ç±»å‹ã€ç»“æ„ã€è¾¹ç•Œæ¡ä»¶ä¸åå¤„ç†é€»è¾‘ã€‚

> **ç›®æ ‡**ï¼šä»¥æ›´æ¸…æ™°çš„ Python API æ›¿ä»£åŸç”Ÿ `plxscripting` çš„åº•å±‚æ¥å£ï¼Œ
> è®© Plaxis 3D çš„æ•°å€¼ä»¿çœŸå˜å¾—**å¯ç¼–ç¨‹ã€å¯ç»´æŠ¤ã€å¯å¤ç°**ã€‚

---

## ğŸ’¡ è®¾è®¡åˆè¡· | Motivation for Wrapping Plaxis API

### ğŸ§± åŸç”Ÿ `plxscripting` çš„ç—›ç‚¹

Plaxis å®˜æ–¹æä¾›çš„ `plxscripting` åº“è™½ç„¶èƒ½å®ç°è¿œç¨‹å»ºæ¨¡ä¸æ§åˆ¶è®¡ç®—ï¼Œä½†å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š

| é—®é¢˜ç±»åˆ«        | åŸå›                                    | å½±å“                                             |
| ----------- | ------------------------------------ | ---------------------------------------------- |
| **å‘½ä»¤å‘ç°å›°éš¾**  | è®¸å¤šå¯¹è±¡çš„å±æ€§ä¸æ–¹æ³•åªèƒ½é€šè¿‡ `__dir__()` æˆ–å®éªŒè°ƒç”¨æ‰èƒ½å¾—çŸ¥ | å¼€å‘æ—¶ç¼ºä¹è¡¥å…¨ä¸æ–‡æ¡£æ”¯æŒ                                   |
| **å±æ€§è°ƒç”¨ä¸é€æ˜** | å‚æ•°å‘½åã€å¤§å°å†™ä¸ç±»å‹ä¸ä¸€è‡´                       | å®¹æ˜“å‡ºé”™ä¸”è°ƒè¯•å›°éš¾                                      |
| **è°ƒç”¨é¡ºåºä¾èµ–å¼º** | ä¾‹å¦‚åˆ›å»ºææ–™ä¸ç»“æ„çš„å…ˆåé¡ºåºå¿…é¡»ç¬¦åˆå†…éƒ¨é€»è¾‘               | ä¸€æ—¦é¡ºåºé”™ï¼Œè„šæœ¬å³å¤±è´¥                                    |
| **å‚æ•°éªŒè¯ç¼ºå¤±**  | æ— ç±»å‹æ£€æŸ¥ä¸å‚æ•°éªŒè¯æœºåˆ¶                         | å¸¸è§æŠ¥é”™å¦‚ â€œunknown propertyâ€ã€â€œwrong argument typeâ€ |
| **é”™è¯¯æç¤ºæ™¦æ¶©**  | è¿”å›é€šç”¨å¼‚å¸¸ä¿¡æ¯                             | ä¸åˆ©äºæ•™å­¦ä¸å¤ç”¨                                       |

> ğŸ’¬ ç®€è¨€ä¹‹ï¼ŒåŸç”Ÿ API æ˜¯â€œèƒ½ç”¨ä½†ä¸å‹å¥½â€ï¼›å®ƒæ›´åƒä¸€ä¸ª **è¿œç¨‹å‘½ä»¤è¡Œæ¥å£** è€ŒéçœŸæ­£çš„ç¼–ç¨‹åº“ã€‚

---

### âœ… æ˜¾å¼å°è£… API çš„ä¼˜åŠ¿

åœ¨ **plaxisproxy-excavation** ä¸­ï¼Œæ‰€æœ‰ Plaxis å‘½ä»¤å‡è¢«é‡æ–°å°è£…ä¸º**æ˜¾å¼ API**ï¼š

| é¡¹ç›®       | åŸç”Ÿ plxscripting        | plaxisproxy-excavation å°è£…å   |
| -------- | ---------------------- | ---------------------------- |
| **è°ƒç”¨æ–¹å¼** | æ¨¡ç³Šå‘½ä»¤ï¼ˆéœ€ `__dir__()` æ¢æµ‹ï¼‰ | æ˜¾å¼ç±»æ–¹æ³•ï¼ˆIDE å¯è‡ªåŠ¨è¡¥å…¨ï¼‰             |
| **å‚æ•°ä¼ é€’** | ä¸ç»Ÿä¸€ï¼ˆç±»å‹/é¡ºåºä¾èµ–å†…éƒ¨ï¼‰         | æ˜ç¡®å‚æ•°åä¸ç±»å‹æç¤º                   |
| **é”™è¯¯æ§åˆ¶** | æ— æ ¡éªŒï¼ŒæŠ›å‡ºæ¨¡ç³Šå¼‚å¸¸             | è‡ªåŠ¨æ£€æµ‹å¹¶æŠ›å‡ºè¯¦ç»†é”™è¯¯                  |
| **å¯¹è±¡å…³ç³»** | å…¨å±€å‘½ä»¤å¼                  | é¢å‘å¯¹è±¡ï¼ˆWallã€Soilã€Wellã€Phase ç­‰ï¼‰ |
| **é˜¶æ®µç®¡ç†** | æ‰‹åŠ¨åˆ›å»ºã€å…³è”å¤æ‚              | è‡ªåŠ¨ç®¡ç† Phase é“¾æ¥ä¸æ¿€æ´»é€»è¾‘           |
| **è„šæœ¬ç»“æ„** | ç¨‹åºåŒ–ä½†ä¸å¯ç»´æŠ¤               | é«˜å±‚æŠ½è±¡æ¸…æ™°ã€æ¨¡å—åŒ–ã€å¯æ‰©å±•               |

---

### âš™ï¸ æ˜¾å¼ API èƒ½è§£å†³çš„æ ¸å¿ƒé—®é¢˜

1. ğŸ§© **æ¸…æ™°è°ƒç”¨å…³ç³»**
   ä¸å†éœ€è¦é  `__dir__()` è¯•æ¢å‘½ä»¤ã€‚æ¯ä¸ª Plaxis å¯¹è±¡éƒ½æœ‰ä¸“å±ç±»ï¼ˆå¦‚ `RetainingWall`ã€`SoilLayer`ã€`Well`ï¼‰ï¼Œå…¶æ–¹æ³•ä¸å±æ€§åœ¨ IDE ä¸­ä¸€ç›®äº†ç„¶ã€‚

2. ğŸ§± **å‚æ•°èµ‹å€¼ä¸é¡ºåºæ§åˆ¶**
   åˆ›å»ºææ–™æˆ–ç»“æ„æ—¶ï¼Œå°è£…å†…éƒ¨ä¼šè‡ªåŠ¨ç¡®ä¿æ­£ç¡®çš„å‚æ•°é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼š

   * ææ–™å±æ€§è‡ªåŠ¨æ£€æŸ¥å•ä½ä¸ç±»å‹ï¼›
   * ç»“æ„ä¾èµ–çš„ææ–™å¯¹è±¡ä¼šè‡ªåŠ¨ç»‘å®šï¼›
   * é¿å… â€œproperty not foundâ€ ä¸ â€œattribute missingâ€ é”™è¯¯ã€‚

3. ğŸ§  **é€»è¾‘é˜²æŠ¤ä¸é”™è¯¯æ ¡éªŒ**
   æ¯ä¸ª API éƒ½å†…ç½®å‚æ•°æ ¡éªŒä¸å¼‚å¸¸æ•è·ã€‚ä¾‹å¦‚ï¼š

   * è‹¥æŸå¢™ä½“åº•éƒ¨æœªé—­åˆï¼Œå°†æç¤ºå‡ ä½•ä¸å°é—­ï¼›
   * è‹¥ `excava_depth` è¶…å‡ºæœ€æ·±å¢™åº•ï¼Œåˆ™é˜»æ­¢ç”Ÿæˆå‘åº•ï¼›
   * è¿™äº›æ£€æŸ¥èƒ½é˜²æ­¢ä»¿çœŸå¤±è´¥æˆ–éç‰©ç†è®¡ç®—ã€‚

---

## âœ¨ åŠŸèƒ½ä¸ä¼˜åŠ¿ | Features & Benefits

### ğŸ” åŠŸèƒ½æ¦‚è§ˆ

| åŠŸèƒ½æ¨¡å—           | æè¿°                             |
| -------------- | ------------------------------ |
| ğŸ—ï¸ **è‡ªåŠ¨åŒ–å»ºæ¨¡**  | ä»å‡ ä½•ã€åœŸå±‚ã€ç»“æ„åˆ°å¼€æŒ–é˜¶æ®µçš„å…¨æµç¨‹è‡ªåŠ¨å»ºæ¨¡         |
| âš™ï¸ **è‡ªåŠ¨åŒ–è®¡ç®—**   | è‡ªåŠ¨è§¦å‘ç½‘æ ¼ç”Ÿæˆä¸è®¡ç®—ï¼Œæ”¯æŒé˜¶æ®µç»§æ‰¿             |
| ğŸ“Š **ç»“æœæå–ä¸å¯¼å‡º** | å¯æå– Uxã€Uyã€Uzã€åº”åŠ›ã€å†…åŠ›ç­‰ç»“æœå¹¶å¯¼å‡º Excel |
| ğŸ§± **é¡¹ç›®æ£€æŸ¥**    | è‡ªåŠ¨æ£€æŸ¥å¢™ä½“é—­åˆã€æ·±åº¦åˆç†æ€§ã€é˜¶æ®µè¿è´¯æ€§           |
| ğŸ§© **å°è£…å¼ API** | æä¾› OOP é£æ ¼çš„æ¸…æ™°æ¥å£ï¼Œç»Ÿä¸€å‚æ•°å‘½åä¸ç»“æ„å±‚çº§     |
| ğŸ” **å¯æ‰©å±•æ€§**    | æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯è‡ªå®šä¹‰ç»“æ„ã€ææ–™ã€å·¥å†µä¸å¯¼å‡ºå™¨         |

---

### âœ… å°è£…å¸¦æ¥çš„ä¼˜åŠ¿

* [x] **æé«˜å»ºæ¨¡æ•ˆç‡**ï¼šé€šè¿‡ç±»æ–¹æ³•æ‰¹é‡åˆ›å»ºæ¨¡å‹è¦ç´ ï¼›
* [x] **é™ä½é‡å¤åŠ³åŠ¨**ï¼šæ”¯æŒå¤šé˜¶æ®µã€é‡å¤æ€§æ¨¡å‹çš„å¤ç”¨ï¼›
* [x] **æ”¹è¿›ä»£ç å¯ç»´æŠ¤æ€§**ï¼šæ¸…æ™°çš„æ¨¡å—ä¸æ¥å£è®¾è®¡ï¼›
* [x] **ä¾¿äºæ‰©å±•ä¸é›†æˆ**ï¼šå¯ä¸ä¼˜åŒ–ç®—æ³•ã€å¯è§†åŒ–å·¥å…·ååŒï¼›
* [x] **æå‡æ•™å­¦ä½“éªŒ**ï¼šå­¦ç”Ÿå¯å¿«é€Ÿç†è§£æ•°å€¼å»ºæ¨¡é€»è¾‘ï¼›
* [x] **å¢å¼ºé²æ£’æ€§**ï¼šè‡ªåŠ¨æ£€æµ‹å‚æ•°åˆæ³•æ€§ä¸å‡ ä½•é—­åˆï¼›
* [x] **ç»Ÿä¸€æ¥å£é£æ ¼**ï¼šæ‰€æœ‰å‘½ä»¤å‡é‡‡ç”¨ Python é£æ ¼å‘½åï¼›
* [x] **æ”¯æŒæ‰¹é‡ä»¿çœŸ**ï¼šå¯å¿«é€Ÿè¿è¡Œå¤šå·¥å†µå¯¹æ¯”åˆ†æã€‚

---

## âš™ï¸ å®‰è£…ä¸ç¯å¢ƒ | Installation & Environment

### ğŸ§© ä¾èµ–ç¯å¢ƒ

* Python **3.9.x**
* Plaxis **3D 2023 æˆ–ä»¥ä¸Šç‰ˆæœ¬**
* éœ€å¯ç”¨ Plaxis Remote Scripting æœåŠ¡

### ğŸ“¦ Python åŒ…ä¾èµ–

å®‰è£…æœ¬æ¡†æ¶ä¹‹å‰éœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼š

```bash
pip install shapely==2.0.7
pip install plxscripting==1.0.4
```

ç›´æ¥è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æœ¬æ¡†æ¶ï¼š

```bash
pip install plaxisproxy-excavation
```

### âš™ï¸ é…ç½® Plaxis è¿œç¨‹æœåŠ¡

ä¿®æ”¹ï¼š

```bash
config/plaxis_config.py
```

è®¾ç½®ï¼š

```python
HOST = "localhost"
PORT = 10000
PASSWORD = "your_plaxis_password"
```

ç¡®ä¿ Plaxis 3D å·²å¯åŠ¨ä¸” Remote scripting æœåŠ¡å¤„äºå¼€å¯çŠ¶æ€ã€‚

---

## ğŸ§© é¡¹ç›®ç»“æ„ | Project Architecture

### ğŸ“ ç›®å½•æ ‘

```
plaxisproxy-excavation/
â”œâ”€ config/
â”‚  â””â”€ plaxis_config.py
â”œâ”€ examples/
â”‚  â””â”€ testmapper.py
â”œâ”€ src/
â”‚  â””â”€ plaxisproxy_excavation/
â”‚     â”œâ”€ core/
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â””â”€ plaxisobject.py           # åŸºç±»/å¯¹è±¡æŠ½è±¡ï¼šç»Ÿä¸€ID/ä¼šè¯/å±æ€§æ˜ å°„
â”‚     â”‚
â”‚     â”œâ”€ components/
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â”œâ”€ curvepoint.py             # æ›²çº¿/ç‰¹å¾ç‚¹æŠ½è±¡ï¼ˆä¾›å‡ ä½•/å·¥å†µä½¿ç”¨ï¼‰
â”‚     â”‚  â”œâ”€ mesh.py                   # ç½‘æ ¼å…¨å±€è®¾ç½®/ç»†åŒ–ç­–ç•¥
â”‚     â”‚  â”œâ”€ phase.py                  # Phase å®ä½“ï¼šç»§æ‰¿ã€æ¿€æ´»æ¸…å•ã€åœŸä½“è¦†ç›–ç­‰
â”‚     â”‚  â”œâ”€ phasesettings.py          # å¡‘æ€§é˜¶æ®µ/åŠ è½½ç±»å‹/æ­¥é•¿ç­‰è®¡ç®—å‚æ•°
â”‚     â”‚  â”œâ”€ projectinformation.py     # å·¥ç¨‹ä¿¡æ¯ã€å•ä½ä½“ç³»
â”‚     â”‚  â””â”€ watertable.py             # æ°´ä½ç‚¹è¡¨/æ°´ä½é¢å®šä¹‰
â”‚     â”‚
â”‚     â”œâ”€ materials/
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â”œâ”€ anchormaterial.py         # é”šæ†/æ‹‰ç´¢ç±»ææ–™
â”‚     â”‚  â”œâ”€ basematerial.py           # ç»Ÿä¸€ææ–™åŸºç±»ï¼ˆå…¬å…±å±æ€§ã€æ ¡éªŒï¼‰
â”‚     â”‚  â”œâ”€ beammaterial.py           # æ¢å•å…ƒææ–™ï¼ˆæ”¯æ’‘/ç«‹æŸ±ç­‰ï¼‰
â”‚     â”‚  â”œâ”€ pilematerial.py           # æ¡©/åµŒå…¥å¼æ¡©ææ–™
â”‚     â”‚  â”œâ”€ platematerial.py          # æ¿å•å…ƒææ–™ï¼ˆå¦‚åœ°è¿å¢™ï¼‰
â”‚     â”‚  â””â”€ soilmaterial.py           # åœŸä½“ææ–™ä¸å·¥å‚ï¼ˆSoilMaterialFactory, æšä¸¾ï¼‰
â”‚     â”‚
â”‚     â”œâ”€ plaxishelper/
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â”œâ”€ boreholemapper.py         # é’»å­”/å±‚åº â†’ Plaxis æ˜ å°„
â”‚     â”‚  â”œâ”€ geometrymapper.py         # Point/Line/Polygon/Surface æ˜ å°„
â”‚     â”‚  â”œâ”€ loadmapper.py             # è·è½½ä¸å·¥å†µæ˜ å°„
â”‚     â”‚  â”œâ”€ materialmapper.py         # å„ç±»ææ–™å±æ€§æ˜ å°„/èµ‹å€¼é¡ºåºæ§åˆ¶
â”‚     â”‚  â”œâ”€ meshmapper.py             # ç½‘æ ¼ç”Ÿæˆä¸ç»†åŒ–ç­–ç•¥ä¸‹å‘
â”‚     â”‚  â”œâ”€ monitormapper.py          # ç›‘æµ‹ç‚¹/ç»“æœç›‘æµ‹æ˜ å°„
â”‚     â”‚  â”œâ”€ phasemapper.py            # Phase åˆ›å»º/ç»§æ‰¿/æ¿€æ´»æ¸…å•æ˜ å°„
â”‚     â”‚  â”œâ”€ plaxisoutput.py           # Output ä¼šè¯ä¸ç»“æœæŸ¥è¯¢å°è£…
â”‚     â”‚  â”œâ”€ plaxisrunner.py           # Input/Output å®¢æˆ·ç«¯ã€ä¼šè¯ä¸é”™è¯¯å¤„ç†
â”‚     â”‚  â”œâ”€ projectinfomapper.py      # å·¥ç¨‹ä¿¡æ¯/å•ä½æ˜ å°„
â”‚     â”‚  â”œâ”€ resulttypes.py            # ç»“æœæšä¸¾ï¼ˆPlate.Ux ç­‰ï¼‰
â”‚     â”‚  â””â”€ structuremapper.py        # ç»“æ„ä½“ï¼ˆå¢™/æ¢/äº•/è·è½½ç­‰ï¼‰æ˜ å°„
â”‚     â”‚     â””â”€ watertablemapper.py    # ï¼ˆåŒçº§ï¼‰æ°´ä½ç›¸å…³æ˜ å°„
â”‚     â”‚
â”‚     â”œâ”€ structures/
â”‚     â”‚  â”œâ”€ __init__.py
â”‚     â”‚  â”œâ”€ anchor.py                 # é”šæ†/æ‹‰é”šç»“æ„
â”‚     â”‚  â”œâ”€ basestructure.py          # ç»“æ„åŸºç±»ï¼šé€šç”¨å±æ€§ã€åˆ›å»ºåè®®
â”‚     â”‚  â”œâ”€ beam.py                   # æ¢/æ’‘ï¼ˆæ°´å¹³æ’‘ã€å›´æª©ç­‰ï¼‰
â”‚     â”‚  â”œâ”€ embeddedpile.py           # åµŒå…¥å¼æ¡©
â”‚     â”‚  â”œâ”€ load.py                   # é¢/çº¿/ç‚¹è·è½½å®ä½“
â”‚     â”‚  â”œâ”€ retainingwall.py          # å›´æŠ¤å¢™ï¼ˆåœ°è¿å¢™/æˆªæ¡©å¢™ç­‰ï¼‰
â”‚     â”‚  â”œâ”€ soilblock.py              # åœŸä½“å—ï¼ˆå¼€æŒ–å—/ä¿ç•™å—ï¼‰
â”‚     â”‚  â””â”€ well.py                   # äº•ç‚¹ï¼ˆæŠ½æ°´/å›çŒï¼Œå‚æ•°ï¼šæµé‡ã€äº•æ·±ç­‰ï¼‰
â”‚     â”‚
â”‚     â”œâ”€ excavation.py                # FoundationPit å®¹å™¨ + StructureType æšä¸¾
â”‚     â””â”€ builder/
â”‚        â””â”€ excavation_builder.py     # æ„å»ºå™¨ï¼šå»ºæ¨¡/é˜¶æ®µ/è®¡ç®—/ç»“æœæå–çš„æ€»æ§
â”‚
â”œâ”€ tests/
â”‚  â””â”€ ...
â”œâ”€ requirements.txt
â””â”€ README.md

```

---

### ğŸ§± æ¨¡å—èŒè´£æ¦‚è§ˆ

| æ¨¡å—                        | è¯´æ˜                                               |
| ------------------------- | ------------------------------------------------ |
| **excavation_builder.py** | æ§åˆ¶æ•´ä¸ªå»ºæ¨¡ä¸è®¡ç®—æµç¨‹çš„æ ¸å¿ƒæ¨¡å—ã€‚è´Ÿè´£æ¨¡å‹éªŒè¯ã€é˜¶æ®µåˆ›å»ºã€è®¡ç®—æ‰§è¡Œã€ç»“æœå¯¼å‡ºã€‚          |
| **excavation.py**         | å®šä¹‰åŸºå‘å¯¹è±¡ `FoundationPit`ï¼ŒåŒ…å«å‡ ä½•è¾¹ç•Œã€ç»“æ„åˆ—è¡¨ã€æ–½å·¥é˜¶æ®µç­‰ã€‚        |
| **materials/**            | å°è£…ä¸åŒç±»å‹çš„ææ–™ï¼šåœŸä½“ã€æ¿ã€æ¢ã€é”šæ†ç­‰ï¼›æä¾›å±æ€§æ˜ å°„ä¸é»˜è®¤å‚æ•°ã€‚                |
| **structures/**           | å®šä¹‰æ”¯æŠ¤ã€äº•ç‚¹ã€å¢™ä½“ç­‰ç»“æ„å…ƒç´ ç±»ï¼›å„ç±»å‡å« `create_in_plaxis()` æ–¹æ³•ã€‚   |
| **geometry.py**           | å‡ ä½•æ“ä½œè¾…åŠ©ï¼ˆå¦‚å¤šè¾¹å½¢ç”Ÿæˆã€åæ ‡å˜æ¢ã€ä½“ç§¯è®¡ç®—ï¼‰ã€‚                        |
| **borehole.py**           | åœŸå±‚ä¸é’»å­”æ¨¡å‹ï¼Œæ”¯æŒæŒ‰æ·±åº¦åˆ†å±‚ã€‚                                 |
| **plaxishelper/**         | å¯¹åŸç”Ÿ `plxscripting` è¿›è¡Œè½»å°è£…ï¼ŒåŒ…æ‹¬ Inputã€Output çš„å®¢æˆ·ç«¯ç®¡ç†ã€‚ |
| **resulttypes.py**        | ç»Ÿä¸€ç»“æœæšä¸¾ï¼ˆå¦‚ä½ç§»ã€å†…åŠ›ã€åº”åŠ›ç±»å‹ï¼‰ï¼Œç”¨äºç»“æœæå–å‡½æ•°ã€‚                    |

---

### ğŸ§­ æ¶æ„é€»è¾‘å›¾

```
PlaxisRunner  â†’  ExcavationBuilder  â†’  FoundationPit
                                   â†™
                        Structures / Materials / Phases
                                   â†˜
                               Result Exporter
```

* **PlaxisRunner**ï¼šè´Ÿè´£è¿æ¥å’Œä¼šè¯ç®¡ç†ï¼›
* **ExcavationBuilder**ï¼šè´Ÿè´£æ„å»ºã€è®¡ç®—ã€æå–ï¼›
* **FoundationPit**ï¼šæ•°æ®å®¹å™¨ï¼›
* **Structures**ï¼šç»“æ„ä¸æ”¯æŠ¤ï¼›
* **Exporter**ï¼šå¯¼å‡º Excelã€‚

---

### ğŸ’¬ å¦‚ä½•è´¡çŒ® | How to Contribute

1. Fork ä»“åº“å¹¶åˆ›å»ºæ–°åˆ†æ”¯ï¼š

   ```bash
   git checkout -b feature/new-module
   ```
2. åœ¨ `src/plaxisproxy_excavation/` ä¸‹æ·»åŠ æ–°ç±»æˆ–æ¨¡å—ï¼›
3. ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆæ”¾å…¥ `/tests`ï¼‰ï¼›
4. æäº¤ PR å¹¶é™„å¸¦ä½¿ç”¨ç¤ºä¾‹ã€‚

---

## ğŸ§  ç¤ºä¾‹è§£æ | Example: `examples/testmapper.py`

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹è„šæœ¬ï¼ˆ`examples/testmapper.py`ï¼‰ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡å°è£…çš„ API è‡ªåŠ¨åŒ–å®ŒæˆåŸºå‘å»ºæ¨¡ã€è®¡ç®—ä¸ç»“æœå¯¼å‡ºã€‚

```python
# -*- coding: utf-8 -*-
"""
testmapper.py
Demonstration of automated pit assembly and calculation using Plaxis API wrapper.
"""

from src.plaxisproxy_excavation.excavation import FoundationPit
from src.plaxisproxy_excavation.excavation_builder import ExcavationBuilder
from src.plaxisproxy_excavation.plaxishelper.runner import PlaxisRunner
from src.plaxisproxy_excavation.materials import SoilMaterialFactory
from src.plaxisproxy_excavation.structures import RetainingWall, Well
from shapely.geometry import Polygon
import math

def rect_wall_x(y0=0, y1=50, x=0, z0=0, z1=-25):
    """Create rectangular wall geometry along x-axis."""
    return [[x, y0, z0], [x, y1, z0], [x, y1, z1], [x, y0, z1]]

def wells_on_polygon_edges(polygon: Polygon, spacing: float = 5.0):
    """Generate well points along polygon edges at given spacing."""
    coords = list(polygon.exterior.coords)
    wells = []
    for i in range(len(coords)-1):
        p1, p2 = coords[i], coords[i+1]
        length = math.hypot(p2[0]-p1[0], p2[1]-p1[1])
        n = int(length // spacing)
        for j in range(n+1):
            x = p1[0] + (p2[0]-p1[0]) * j / n
            y = p1[1] + (p2[1]-p1[1]) * j / n
            wells.append((x, y))
    return wells

def assemble_pit():
    """Create a demo excavation pit with walls, soil, and wells."""
    runner = PlaxisRunner("localhost", 10000, "password")
    pit = FoundationPit("TeachingDemoPit")

    # Define soil
    soil = SoilMaterialFactory.create_default()
    pit.add_soil(soil)

    # Define walls
    wall1 = RetainingWall(points=rect_wall_x(y0=0, y1=40, x=0))
    wall2 = RetainingWall(points=rect_wall_x(y0=0, y1=40, x=40))
    pit.add_structure(wall1)
    pit.add_structure(wall2)

    # Define wells
    polygon = Polygon([(0,0), (40,0), (40,40), (0,40)])
    wells = wells_on_polygon_edges(polygon)
    for w in wells:
        pit.add_structure(Well(x=w[0], y=w[1], depth=25))

    builder = ExcavationBuilder(runner, pit)
    builder.build()
    builder.calculate()

    # Export displacement results
    from src.plaxisproxy_excavation.utils.exporter import export_walls_horizontal_displacement_excel_2
    export_walls_horizontal_displacement_excel_2(builder, "results.xlsx")

if __name__ == "__main__":
    assemble_pit()
```

---

### ğŸ“– é€è¡Œè§£æä¸å¯¹åº”æ¨¡å—

| è¡Œå·èŒƒå›´      | å†…å®¹                                             | è¯´æ˜                                              |
| --------- | ---------------------------------------------- | ----------------------------------------------- |
| **1â€“11**  | æ¨¡å—å¯¼å…¥                                           | å¼•å…¥æ ¸å¿ƒæ„å»ºç±»ä¸å°è£…çš„å‡ ä½•ã€ç»“æ„æ¨¡å—ï¼›æ›¿ä»£äº†åŸç”Ÿ `g_i.*` å‘½ä»¤ã€‚            |
| **13â€“18** | `rect_wall_x`                                  | ç”¨äºç”ŸæˆçŸ©å½¢å¢™ä½“çš„å‡ ä½•ç‚¹åºåˆ—ï¼›è¿”å›å››ç‚¹å°é—­å¤šè¾¹å½¢ã€‚å¯¹åº”å°è£…åœ¨ `geometry.py`ã€‚   |
| **20â€“32** | `wells_on_polygon_edges`                       | åˆ©ç”¨ `shapely` ç”Ÿæˆäº•ç‚¹åæ ‡ï¼›æŒ‰è¾¹é•¿åº¦ä¸é—´è·è‡ªåŠ¨å¸ƒäº•ã€‚                |
| **34â€“65** | `assemble_pit()` ä¸»å‡½æ•°                           | ä¸»ä½“é€»è¾‘ï¼šè¿æ¥ Plaxis â†’ å®šä¹‰åœŸä½“ â†’ å¢™ä½“ â†’ äº•ç‚¹ â†’ æ„å»ºä¸è®¡ç®—ã€‚        |
| **37**    | `PlaxisRunner`                                 | å»ºç«‹ä¸ Plaxis 3D Input æœåŠ¡çš„é€šä¿¡è¿æ¥ï¼ˆåº•å±‚åŸºäº plxscriptingï¼‰ã€‚ |
| **38â€“39** | `FoundationPit`                                | åˆ›å»ºåŸºå‘å¯¹è±¡ï¼Œä½œä¸ºç»Ÿä¸€çš„æ¨¡å‹å®¹å™¨ã€‚                               |
| **42**    | `SoilMaterialFactory`                          | è‡ªåŠ¨ç”Ÿæˆé»˜è®¤åœŸä½“ææ–™ï¼ˆå¸¦ç‰©ç†å‚æ•°ï¼‰ï¼Œå°è£…è‡ª materials æ¨¡å—ã€‚             |
| **44â€“47** | `RetainingWall`                                | å®šä¹‰å¢™ä½“ç»“æ„å¹¶åŠ å…¥åŸºå‘ï¼›è‡ªåŠ¨å»ºç«‹å¢™é¢å‡ ä½•ä¸ææ–™å…³è”ã€‚                      |
| **49â€“55** | `Well`                                         | æ²¿è¾¹å¸ƒç½®äº•ç‚¹é™æ°´ç³»ç»Ÿï¼Œä½“ç°å…¸å‹åŸºå‘é™æ°´å¸ƒç½®ã€‚                          |
| **57â€“61** | `ExcavationBuilder`                            | è°ƒç”¨æ„å»ºå™¨è‡ªåŠ¨ç”Ÿæˆå‡ ä½•ã€ææ–™ã€ç»“æ„ä¸é˜¶æ®µã€‚                           |
| **63â€“64** | `export_walls_horizontal_displacement_excel_2` | ç»“æœå¯¼å‡ºå‡½æ•°ï¼Œæå–æ¯é¢å¢™åœ¨å„é˜¶æ®µçš„ä½ç§»ç»“æœåˆ° Excelã€‚                   |
| **66â€“67** | ä¸»å‡½æ•°è°ƒç”¨                                          | ç›´æ¥è¿è¡Œåå®Œæˆæ•´ä¸ªå»ºæ¨¡ã€è®¡ç®—ä¸å¯¼å‡ºæµç¨‹ã€‚                            |

---

### ğŸ” è‡ªåŠ¨åŒ–å·¥ä½œæµè¯´æ˜

1. **è¿æ¥é˜¶æ®µ**ï¼š`PlaxisRunner` è‡ªåŠ¨æ‰“å¼€ Input ä¼šè¯ï¼›
2. **å»ºæ¨¡é˜¶æ®µ**ï¼š`ExcavationBuilder.build()` è°ƒç”¨å†…éƒ¨ `_create_materials()`ã€`_create_structures()`ï¼›
3. **è®¡ç®—é˜¶æ®µ**ï¼š`builder.calculate()` è°ƒç”¨ Plaxis API æ‰§è¡Œæ‰€æœ‰ Phaseï¼›
4. **ç»“æœé˜¶æ®µ**ï¼šè‡ªåŠ¨è¿æ¥ Outputï¼Œæå–æ‰€éœ€ç»“æœï¼›
5. **å¯¼å‡ºé˜¶æ®µ**ï¼šå°è£…å¯¼å‡ºå™¨è¾“å‡º Excel æŠ¥è¡¨ï¼Œä¸€é¢å¢™ä¸€ä¸ª Sheetã€‚

---

<!-- ## ğŸ”® æœªæ¥å±•æœ› | Future Directions

* ğŸ“ˆ **ç»“æœå¯è§†åŒ–æ¨¡å—**ï¼šé›†æˆ matplotlib / plotlyï¼›
* ğŸ§® **ä¼˜åŒ–ç®—æ³•æ¥å£**ï¼šä¸é—ä¼ ç®—æ³•/æœºå™¨å­¦ä¹ ç»“åˆï¼›
* ğŸ§  **æ™ºèƒ½ç½‘æ ¼åˆ’åˆ†**ï¼šåŸºäºå¢™æ·±åº¦ä¸åœŸå±‚è‡ªé€‚åº”å‰–åˆ†ï¼›
* ğŸŒ **Web æ§åˆ¶å°**ï¼šæ”¯æŒæµè§ˆå™¨ç«¯æ“ä½œä¸æ¨¡å‹é¢„è§ˆã€‚ -->

<!-- * âš¡ **å¹¶è¡Œè®¡ç®—æ”¯æŒ**ï¼šå¤šå‘åŒæ­¥è®¡ç®—ï¼› -->

---

## ğŸ¤ è´¡çŒ®ä¸è®¸å¯è¯ | Contributing & License

* æœ¬é¡¹ç›®éµå¾ª **Apache-2.0**ï¼›
* æ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼›
* å»ºè®®é™„å¸¦ï¼š

  * ç¤ºä¾‹è„šæœ¬ï¼›
  * å•å…ƒæµ‹è¯•ï¼›
  * æ–‡æ¡£æ›´æ–°ã€‚

---

## ğŸ æ€»ç»“ | Summary

`plaxisproxy-excavation` é€šè¿‡é¢å‘å¯¹è±¡å°è£…ï¼Œå°† Plaxis çš„å¤æ‚å‘½ä»¤è¡Œå¼æ¥å£è½¬åŒ–ä¸ºæ¸…æ™°ã€ç»Ÿä¸€ã€è‡ªåŠ¨åŒ–çš„ Python APIï¼Œä½¿å¾—ï¼š

* æ¨¡å‹æ„å»º**æ›´å¿«ã€æ›´ç¨³ã€æ›´å¯æ§**ï¼›
* ä»£ç ç»“æ„**æ›´æ¸…æ™°ã€æ˜“ç»´æŠ¤**ï¼›
* ä»¿çœŸæµç¨‹**æ›´è‡ªåŠ¨åŒ–ã€å¯é‡å¤**ã€‚

æ— è®ºæ˜¯æ•™å­¦æ¼”ç¤ºã€ç§‘ç ”å®éªŒï¼Œè¿˜æ˜¯


å·¥ç¨‹é¡¹ç›®çš„æ ‡å‡†åŒ–åˆ†ææµç¨‹ï¼Œå®ƒéƒ½èƒ½æå¤§æå‡ Plaxis çš„ä½¿ç”¨ä½“éªŒã€‚

---

âœ… **Repository:** [QiQiWan/plaxisproxy-excavation](https://github.com/QiQiWan/plaxisproxy-excavation)


ğŸ“š **Language:** Python 3.9

ğŸ§© **Dependencies:** shapely==2.0.7, plxscripting==1.0.4

ğŸ—ï¸ **Application:** Plaxis 3D Excavation Automation Framework

---

## äº¤æµä¸è®¨è®º

<p align="center">
  <img src="doc/imgs/EatRicer_qrcode.jpg" alt="å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç " width="30%" />
  <img src="doc/imgs/WXCode.jpg" alt="æ·»åŠ æˆ‘çš„å¾®ä¿¡ä¸€èµ·è®¨è®ºä¸ä¼˜åŒ–" width="30%" />
</p>
